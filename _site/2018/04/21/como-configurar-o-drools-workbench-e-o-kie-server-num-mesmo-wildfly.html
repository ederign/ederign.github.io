<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Eder Ignatowicz">

  <title>
    Eder Ignatowicz
    |
    
    [pt-br] Como configurar o Drools Workbench e o KIE Server num mesmo WildFly
    
  </title>
  <meta name="description"
    content="Talvez você não saiba, mas estou trabalhando na evolução do Drools Workbench [1] nos últimos dois anos. É bastante recompensador e se você também quiser cont...">

  <link rel="icon" href="/assets/favicon.png">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Raleway:wght@500;600;700&display=block">

  <link rel="stylesheet" href="/assets/normalize.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/changes.css">
  <link rel="canonical" href="http://localhost:4000/2018/04/21/como-configurar-o-drools-workbench-e-o-kie-server-num-mesmo-wildfly.html">
  <link rel="alternate" type="application/rss+xml" title="Eder Ignatowicz"
    href="/feed.xml">

  
</head>


<body>
  <main class="wrapper">
    <header>
  
  
  <nav>
    <a href="/">
      Posts
    </a>
    
     
      
    
    <a href="/about/">
      About
    </a>   
      
      
      
    
    <a href="/talks/">
      Talks
    </a>   
      
    <a href="/feed.xml">
      RSS
    </a>
  </nav>
</header>

    <section class="container">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    

    <h1 itemprop="name headline">[pt-br] Como configurar o Drools Workbench e o KIE Server num mesmo WildFly</h1>
    <p>
      <time datetime="2018-04-21T23:00:00-04:00" itemprop="datePublished">
        Apr 21, 2018 ・ 3 min read
      </time>
    </p>

    <div itemprop="articleBody">
      <p>Talvez você não saiba, mas estou trabalhando na evolução do Drools Workbench [1] nos últimos dois anos. É bastante recompensador e se você também quiser contribuir para esse projeto pode começar por <a href="https://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/master/README.md">aqui</a>.</p>

<p>Durante a reprodução de determinados cenários e evolução de features, percebo uma dúvida surgir frequentemente entre as pessoas do time e contribuidores da comunidade: <em>“Como subir o Workbench e o KIE Server</em> [2] <em>num mesmo WildFly?”</em>.</p>

<p>Neste post, faremos isso juntos da maneira mais rápida possível com apenas 3 etapas :-)</p>

<h3 id="1-preparando-o-wildfly">1) Preparando o WildFly</h3>

<p>O download do WildFly é a primeiro passo do processo. Acessamos <a href="http://wildfly.org/downloads">wildfly.org/downloads</a> e selecionamos a versão <code class="language-plaintext highlighter-rouge">11.0.0.Final</code> (<code class="language-plaintext highlighter-rouge">Java EE7 Full &amp; Web Distribution</code>).</p>

<p>Com o arquivo <code class="language-plaintext highlighter-rouge">wildfly-11.0.0.Final.zip</code> descompactado, acessamos o diretório <code class="language-plaintext highlighter-rouge">bin</code> e executamos as linhas a seguir para adicionar dois novos usuários:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./add-user.sh -a -u kieserver -g 'kie-server' -p 'kieserver1!'
$ ./add-user.sh -a -u workbench -g 'admin,kie-server' -p 'workbench!'
</code></pre></div></div>

<p>Agora saímos do diretório <code class="language-plaintext highlighter-rouge">bin</code>, abrimos o arquivo <code class="language-plaintext highlighter-rouge">standalone/configuration/standalone-full.xml</code> e adicionamos esta linha:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;login-module code="org.kie.security.jaas.KieLoginModule" flag="optional" module="deployment.kie-wb.war"/&gt;
</code></pre></div></div>
<p>aqui:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;security-domains&gt;
  ...
  &lt;security-domain name="other" cache-type="default"&gt;
    &lt;authentication&gt;
      ...
      &lt;!-- Adicione a linha acima aqui --&gt;
    &lt;/authentication&gt;
    ...
</code></pre></div></div>

<p>Pronto, o WildFly está configurado! :-)</p>

<h3 id="2-obtendo-o-kie-server-e-o-drools-workbench">2) Obtendo o KIE Server e o Drools Workbench</h3>

<p>Talvez você já tenha o WAR do KIE Server e do Drools Workbench. Entretanto, se você estiver em seus primeiros dias de contribuição, seria legal <em>buildar</em> a versão mais atualizada destes projetos.</p>

<p>Para conseguir o artefato do KIE Server, faça o clone <a href="https://github.com/kiegroup/droolsjbpm-integration">deste repositório</a>, build e encontre o WAR aqui:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kie-server-parent/kie-server-wars/kie-server/target/kie-server-7.8.0-SNAPSHOT-ee7.war
</code></pre></div></div>
<p>Para conseguir o artefato do Drools Workbench, faça o clone <a href="https://github.com/kiegroup/kie-wb-distributions">deste repositório</a>, build e encontre WAR aqui:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kie-wb-parent/kie-wb-distribution-wars/kie-wb/target/kie-wb-7.8.0-SNAPSHOT-wildfly11.war
</code></pre></div></div>

<p>Pronto! Temos nossos dois artefatos. Vamos para a última etapa :-)</p>

<h3 id="3-rodando-o-drools-workbench-com-o-kie-server">3) Rodando o Drools Workbench com o KIE Server</h3>

<p>Finalmente voltamos para o WildFly e colocamos nossos dois WARs no diretório <code class="language-plaintext highlighter-rouge">standalone/deployments</code>.</p>

<p>Em seguida os renomeamos, respectivamente, de <code class="language-plaintext highlighter-rouge">kie-server-7.8.0-SNAPSHOT-ee7.war</code> e <code class="language-plaintext highlighter-rouge">kie-wb-7.8.0-SNAPSHOT-wildfly11.war</code> para <code class="language-plaintext highlighter-rouge">kie-server.war</code> e <code class="language-plaintext highlighter-rouge">kie-wb.war</code>.</p>

<p>Agora, no diretório <code class="language-plaintext highlighter-rouge">bin</code>, executamos o seguinte comando:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./standalone.sh \
  --server-config=standalone-full.xml \
  -Dorg.kie.server.id=wildfly-kieserver \
  -Dorg.kie.server.persistence.ds=java:jboss/datasources/ExampleDS \
  -Dorg.kie.server.persistence.dialect=org.hibernate.dialect.MySQLDialect \
  -Dorg.kie.server.location=http://localhost:8080/kie-server/services/rest/server \
  -Dorg.kie.server.controller=http://localhost:8080/kie-wb/rest/controller \
  -Dorg.kie.server.user=kieserver \
  -Dorg.kie.server.pwd=kieserver1! \
  -Dorg.drools.server.ext.disabled=true \
  -Dorg.jbpm.server.ext.disabled=true \
</code></pre></div></div>

<p>Pronto! Acesse <a href="http://localhost:8080/kie-wb">localhost:8080/kie-wb</a> com usuário <code class="language-plaintext highlighter-rouge">workbench</code> e senha <code class="language-plaintext highlighter-rouge">workbench!</code>, e veja tudo funcionando:</p>

<p><img src="/assets/wildfly-02-22.gif" alt="Demo" title="Demo" /></p>

<p>Se você quiser saber mais sobre os parâmetros do comando acima, ou sobre algum outro detalhe desse processo. Pode conferir a documentação atualizada do Drools <a href="https://docs.jboss.org/drools/release/latest/drools-docs/html_single">aqui</a>.</p>

<p>Espero que esse tutorial tenha sido útil pra você e lembre-se, divirta-se ;-)</p>

<hr />

<blockquote>
  <p>[1] Drools Workbench is a full featured web application for the visual composition of custom business rules and processes.
<br />Source: https://docs.jboss.org/drools/release/latest/drools-docs/html_single/#_welcome</p>
</blockquote>

<blockquote>
  <p>[2] The Kie Server is a modular, standalone server component that can be used to instantiate and execute rules and processes. It exposes this functionality via REST, JMS and Java interfaces to client application. It also provides seamless integration with the Kie Workbench.
<br />Source: https://docs.jboss.org/drools/release/latest/drools-docs/html_single/#_ch.kie.server</p>
</blockquote>

    </div>

    
    <div class="disqus-thread">

  <hr />
  <div id="disqus_thread"></div>

  <script>
    var disqus_config = function () {
      this.page.url = 'http://localhost:4000/2018/04/21/como-configurar-o-drools-workbench-e-o-kie-server-num-mesmo-wildfly.html';
      this.page.identifier = 'http://localhost:4000/2018/04/21/como-configurar-o-drools-workbench-e-o-kie-server-num-mesmo-wildfly.html';
    };

    (function () {
      var d = document, s = d.createElement('script');

      s.src = 'https://ederign.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
      comments powered by Disqus.
    </a>
  </noscript>
</div>

    
  </article>
</section>

    <footer>
  <p>&copy; 2020 Eder Ignatowicz.</p>
  <span>Originally designed by Guilherme Carreiro.</spam>
</footer>

  </main>
</body>

</html>
